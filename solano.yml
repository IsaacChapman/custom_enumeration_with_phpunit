php:
  php_version: "5.6"

# Tests will be determined by `enumeration` hook script
# http://docs.solanolabs.com/Beta/custom-enumeration/
# The listed test will be replaced by the one determined from the 'enumeration' setup hook, but is here for reference
tests:
  - type: phpunit
    mode: parallel
    output: exit-status
    command: vendor/bin/solano-phpunit -b tests/bootstrap.php
    files:
      - tests/*Test.php     # Include test files in 'tests' directory
      - tests/**/*Test.php  # Include test files in subdirectories of 'tests'

# Setup hooks (http://docs.solanolabs.com/Setup/setup-hooks/)
hooks:
  pre_setup: composer install
  enumeration: ./solano-test-enumeration.php
  worker_setup: echo "Setup databases or other worker-specific tasks"
  post_build: echo "Deploy or other post-build tasks"

# Build profiles (http://docs.solanolabs.com/Beta/build-profiles/)
profiles:
  default:      # All tests
    environment:
      'NOT_APPLICABLE': 'N/A' # Just set to ensure the 'default' profile is parsed properly.
  group_0:      # Only @group = group0 annotated classes/tests will be enumerated and run
    enviroment:
      'INCLUDE_GROUPS': 'group0'
  group_A:      # Only @group = groupA annotated classes/tests will be enumerated and run
    enviroment:
      'INCLUDE_GROUPS': 'groupA'
  group_0_A:      # Only @group = group0 and/or groupA annotated classes/tests will be enumerated and run
    enviroment:
      'INCLUDE_GROUPS': 'group0,groupA'
